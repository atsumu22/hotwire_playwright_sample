<%= turbo_frame_tag task do %>
  <div id="<%= dom_id task %>"class="my-3 rounded-xl shadow-md overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1 <%= task.status ? 'bg-green-100' : 'bg-red-100' %>">
    <div class="p-4 flex items-center justify-between">
      <div class="flex items-center justify-start">
        <%= form_with url: project_task_completed_path(@project), method: :patch, data: { turbo_frame: dom_id(task) } do %>
          <%= hidden_field_tag 'task_completed[task_id]', task.id %>
          <label class="relative flex items-center cursor-pointer me-3">
            <%= check_box_tag 'task_completed[status]', '1', task.status, onchange: 'this.form.requestSubmit()', class: "sr-only peer" %>
            <div class="w-6 h-6 border-2 border-gray-300 rounded-md bg-white peer-checked:bg-blue-500 peer-checked:border-blue-500 transaction-colors duration-200 flex items-center justify-center">
              <svg class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
          </label>
        <% end %>
        <p><%= task.title %></p>
      </div>
      <div class="flex items-center justify-last">
        <%= link_to "編集", edit_project_task_path(@project, task), class: "btn btn-primary me-2" %>
        <%= button_to "削除", project_task_path(@project, task), method: :delete, class: "btn btn-danger", form: { data: { turbo_confirm: "本当に削除しますか？" } } %>
      </div>
    </div>
  </div>
<% end %>
